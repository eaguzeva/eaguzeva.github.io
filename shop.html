
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - HollowFan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            background: linear-gradient(to bottom, #343a40, #6c757d);
            color: #f8f9fa;
        }
        .header-logo {
            max-height: 100px;
        }
        .filter-options {
            margin-bottom: 20px;
        }
        .product-list li {
            border-radius: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .product-list li:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .product-list .card-text, 
        .product-list .card-title {
        color: black;
         }

    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navigation">
                    <ul class="navbar-nav justify-content-center w-100 ">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Главная</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="locations.html">Локации игры</a>
                        </li>
        
                        <li class="nav-item">
                            <a class="nav-link active" href="shop.html">Магазин</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="form.html">Обратная связь</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container py-4">
        <h1 class="text-center mb-4">Магазин</h1>
        <div class="filter-options d-flex justify-content-center gap-3">
            <label>
                <input type="radio" id="sortPrice" name="filterOption" onchange="handleSort()"> Цена
            </label>
            <label>
                <input type="radio" id="sortTitle" name="filterOption" checked onchange="handleSort()"> Название
            </label>
            <input type="text" id="filterSearch" class="form-control w-50" placeholder="Поиск..." oninput="handleSearch()">
        </div>
        <ul class="product-list d-flex flex-wrap justify-content-around p-0 bg-light" id="productContainer">

        </ul>
    </main>
    <div class="container">
        <div class="card-body">
            <h5 class="card-title text-center">Магазин</h5>
             <input type="radio" id="price" name="sort" onchange="sort()"> price  
             <input type="radio" id="title" name="sort" checked="" onchange="sort()"> title 
             <input type="text" id="search" name="search" onchange="search()"> поиск  
            <form action="https://www.bing.com/search?" id="UserEnter" name="UserEnter" target="_blank">


                <input name="q" type="hidden" value="search">
                <ul class="product-list d-flex flex-row justify-content-around flex-wrap bg-light" id="node_for_insert">
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка1.webp">
                        <h5 class="card-title">Фигурка жука-рыцаря</h5>
                        <p class="card-text"> Смоляная фигурка рыцаря в высоту 6.5 дюймов. Фигурка изготовлена и раскрашена вручную. Цена 39$.</p>
                        <input type="hidden" name="vendor_code" value="4448e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка2.webp">
                        <h5 class="card-title">Фигурка Хорнет</h5>
                        <p class="card-text">Смоляная фигурка босса Хорнет в высоту 9.6 дюймов. Фигурка изготовлена и раскрашена вручную. Цена 36$.</p>
                        <input type="hidden" name="vendor_code" value="44410e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка3.webp">
                        <h5 class="card-title">Фигурка личинки</h5>
                        <p class="card-text">Смоляная фигурка личинки в высоту 3.2 дюйма. Говорят, что личинки приносят удачу.  Цена 12$.</p>
                        <input type="hidden" name="vendor_code" value="4447e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка1.webp">
                        <h5 class="card-title">2 виниловые пластинки чб</h5>
                        <p class="card-text">Двухпластинчатый релиз Ghost Ramp с оригинальным саундтреком к фильму «Hollow Knight» Кристофера Ларкина включает 26 треков, записанных на двух дисках с картинками. Каждый экземпляр поставляется с кодом загрузки, напечатанным на карточке внутри обложки.  Цена 39$.</p>
                        <input type="hidden" name="vendor_code" value="222">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка2.webp">
                        <h5 class="card-title">Виниловая пластинка Gods & Nightmares</h5>
                        <p class="card-text">Отправляйтесь в самые дальние уголки Hallownest с совершенно новой коллекцией из 15 эпических треков от Ghost Ramp. Встречайте падших королей, доблестных рыцарей и древних богов в этой мощной оркестровой коллекции, которая объединяет все дополнительные треки Кристофера Ларкина из Hollow Knight и включает совершенно новую аранжировку Pale Court. Цена 29$.</p>
                        <input type="hidden" name="vendor_code" value="333">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка3.webp">
                        <h5 class="card-title">2 виниловые пластинки пианино</h5>
                        <p class="card-text">В сотрудничестве с композитором Кристофером Ларкиным и Team Cherry продюсер и аранжировщик Дэвид Пикок и пианист Августин Маюга Гонсалес снова объединились, чтобы создать 15 великолепных интерпретаций любимых произведений из Hollow Knight в этой постановке Materia Collective. Этот альбом на 2 виниловых пластинках отпечатан на полупрозрачном виниле «Infected Orange» плотностью 180 г и содержит 24-страничный художественный буклет с иллюстрациями от Nise. Цена 54$.</p>
                        <input type="hidden" name="vendor_code" value="4446e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>  
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/футболка1.webp">
                        <h5 class="card-title">Футболка "Вечное Царство"</h5>
                        <p class="card-text">Эта официальная футболка Hollow Knight — классический дизайн герба от Джона Кея. (Унисекс XS-4X — цвет: темно-серый материал: поли-хлопок) Каждая футболка поставляется с бонусной наклейкой. Цена 39$.</p>
                        <input type="hidden" name="vendor_code" value="444e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/футболка2.webp">
                        <h5 class="card-title">Футболка Хорнет</h5>
                        <p class="card-text">Может ли она быть... Охотницей? Эта официальная  футболка Hollow Knight  была разработана Ilustrata. (Унисекс XS-4X — цвет: темно-серый материал: поли-хлопок) Каждая футболка поставляется с бонусной наклейкой. Цена 36$.</p>
                        <input type="hidden" name="vendor_code" value="445e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                        </ul>
                <input class="btn btn-primary" type="Submit" value="В корзину">
            </form>
        </div>
</div>
         
<footer class="bg-dark text-white text-center py-4">
    <p class="mb-0">HollowFan &copy; 2024</p>
    <a href="#top" class="text-white text-decoration-none">Наверх</a>
</footer>

    <script>
        async function fetchProducts() {
            try {
                const response = await fetch("shop.json");
                if (!response.ok) {
                    throw new Error(`Ошибка загрузки данных: ${response.statusText}`);
                }
                const products = await response.json();
                return products;
            } catch (error) {
                console.error(error.message);
                return [];
            }
        }

        async function renderProducts(sortBy = "title", searchQuery = "") {
            const products = await fetchProducts();
            let filteredProducts = [...products];

            // Фильтрация
            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                filteredProducts = filteredProducts.filter(
                    product => product.title.toLowerCase().includes(query) ||
                               product.description.toLowerCase().includes(query) ||
                               product.price.toString().includes(query)
                );
            }

            // Сортировка
            filteredProducts.sort((a, b) => {
                if (sortBy === "price") {
                    return a.price - b.price;
                }
                return a.title.localeCompare(b.title);
            });

            // Рендеринг
            const productContainer = document.getElementById("productContainer");
            productContainer.innerHTML = "";
            filteredProducts.forEach(product => {
                productContainer.innerHTML += `
                    <li class="card m-2 p-3 col-lg-3 col-md-4 col-sm-6">
                        <img src="${product.img}" alt="${product.title}" class="card-img-top">
                        <div class="card-body">
                            <h5 class="card-title">${product.title}</h5>
                            <p class="card-text">${product.description}</p>
                            <p class="card-text text-primary">Цена: ${product.price} р.</p>
                            <button class="btn btn-primary">Заказать</button>
                        </div>
                    </li>
                `;
            });
        }

        function handleSort() {
            const sortByPrice = document.getElementById("sortPrice").checked;
            const sortOption = sortByPrice ? "price" : "title";
            const searchQuery = document.getElementById("filterSearch").value;
            renderProducts(sortOption, searchQuery);
        }

        function handleSearch() {
            const sortByPrice = document.getElementById("sortPrice").checked;
            const sortOption = sortByPrice ? "price" : "title";
            const searchQuery = document.getElementById("filterSearch").value;
            renderProducts(sortOption, searchQuery);
        }

        // Инициализация при загрузке страницы
        renderProducts();
    </script>
</body>
</html>

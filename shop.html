
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - HollowFan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to bottom, #343a40, #6c757d);
            color: #f8f9fa;
        }
        .product-list li {
            border-radius: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .product-list li:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .custom-card {
            color:#343a40;
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navigation">
                    <ul class="navbar-nav justify-content-center w-100">
                        <li class="nav-item"><a class="nav-link" href="index.html">Главная</a></li>
                        <li class="nav-item"><a class="nav-link" href="locations.html">Локации игры</a></li>
                        <li class="nav-item"><a class="nav-link active" href="shop.html">Магазин</a></li>
                        <li class="nav-item"><a class="nav-link" href="form.html">Обратная связь</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="container py-4">
        <h1 class="text-center mb-4">Магазин</h1>


        <div class="mb-3">
            <input type="text" id="search" placeholder="Поиск..." class="form-control" oninput="search()">
        </div>
        
        <div class="d-flex justify-content-center gap-3 mb-4">
            <label>
                <input type="radio" id="price" name="sortOption" onchange="sort()"> Сортировать по цене
            </label>
            <label>
                <input type="radio" id="title" name="sortOption" onchange="sort()"> Сортировать по названию
            </label>
        </div>
            <form  action="https://www.bing.com/search?" id="UserEnter" name="UserEnter" target="_blank" method="get">
                <input type="hidden" name="q" value="search">
        <ul class="product-list  custom-card d-flex flex-wrap justify-content-around p-0 bg-light" id="node_for_insert">
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка1.webp">
                        <h5 class="card-title">Фигурка жука-рыцаря</h5>
                        <p class="card-text"> Смоляная фигурка рыцаря в высоту 6.5 дюймов. Фигурка изготовлена и раскрашена вручную.</p>
                        <p class="card-text text-primary">Цена: 39 $.</p>
                        <input type="hidden" name="vendor_code" value="4448e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка2.webp">
                        <h5 class="card-title">Фигурка Хорнет</h5>
                        <p class="card-text">Смоляная фигурка босса Хорнет в высоту 9.6 дюймов. Фигурка изготовлена и раскрашена вручную.</p>
                        <p class="card-text text-primary">Цена: 36 $.</p>
                        <input type="hidden" name="vendor_code" value="44410e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/фигурка3.webp">
                        <h5 class="card-title">Фигурка личинки</h5>
                        <p class="card-text">Смоляная фигурка личинки в высоту 3.2 дюйма. Говорят, что личинки приносят удачу.</p>
                        <p class="card-text text-primary">Цена: 12 $.</p>
                        <input type="hidden" name="vendor_code" value="4447e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка1.webp">
                        <h5 class="card-title">2 виниловые пластинки чб</h5>
                        <p class="card-text">Двухпластинчатый релиз Ghost Ramp с оригинальным саундтреком к фильму «Hollow Knight» Кристофера Ларкина включает 26 треков, записанных на двух дисках с картинками. Каждый экземпляр поставляется с кодом загрузки, напечатанным на карточке внутри обложки.</p>
                        <p class="card-text text-primary">Цена: 39 $.</p>
                        <input type="hidden" name="vendor_code" value="222">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка2.webp">
                        <h5 class="card-title">Виниловая пластинка Gods & Nightmares</h5>
                        <p class="card-text">Отправляйтесь в самые дальние уголки Hallownest с совершенно новой коллекцией из 15 эпических треков от Ghost Ramp. Встречайте падших королей, доблестных рыцарей и древних богов в этой мощной оркестровой коллекции, которая объединяет все дополнительные треки Кристофера Ларкина из Hollow Knight и включает совершенно новую аранжировку Pale Court.</p>
                        <p class="card-text text-primary">Цена: 29 $.</p>
                        <input type="hidden" name="vendor_code" value="333">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/пластинка3.webp">
                        <h5 class="card-title">2 виниловые пластинки пианино</h5>
                        <p class="card-text">В сотрудничестве с композитором Кристофером Ларкиным и Team Cherry продюсер и аранжировщик Дэвид Пикок и пианист Августин Маюга Гонсалес снова объединились, чтобы создать 15 великолепных интерпретаций любимых произведений из Hollow Knight в этой постановке Materia Collective. Этот альбом на 2 виниловых пластинках отпечатан на полупрозрачном виниле «Infected Orange» плотностью 180 г и содержит 24-страничный художественный буклет с иллюстрациями от Nise.</p>
                        <p class="card-text text-primary">Цена: 54 $.</p>
                        <input type="hidden" name="vendor_code" value="4446e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>  
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/футболка1.webp">
                        <h5 class="card-title">Футболка "Вечное Царство"</h5>
                        <p class="card-text">Эта официальная футболка Hollow Knight — классический дизайн герба от Джона Кея. (Унисекс XS-4X — цвет: темно-серый материал: поли-хлопок) Каждая футболка поставляется с бонусной наклейкой.</p>
                        <p class="card-text text-primary">Цена: 39 $.</p>
                        <input type="hidden" name="vendor_code" value="444e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                            
                    <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                        <img style="width: 180px" class="align-self-center" src="images/футболка2.webp">
                        <h5 class="card-title">Футболка Хорнет</h5>
                        <p class="card-text">Может ли она быть... Охотницей? Эта официальная  футболка Hollow Knight  была разработана Ilustrata. (Унисекс XS-4X — цвет: темно-серый материал: поли-хлопок) Каждая футболка поставляется с бонусной наклейкой.</p>
                        <p class="card-text text-primary">Цена: 36 $.</p>
                        <input type="hidden" name="vendor_code" value="445e">
                        <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min = "0"></p>
                    </li>
                        </ul>
                <input class="btn btn-primary" type="Submit" value="В корзину">
            </form>
        </div>
</div>
         
<footer class="bg-dark text-white text-center py-4">
    <p class="mb-0">HollowFan &copy; 2024</p>
    <a href="#top" class="text-white text-decoration-none">Наверх</a>
</footer>

<script>
    let currentSortOrder = 'asc'; 

function sort() {
    let price = document.getElementById("price");
    let title = document.getElementById("title");

    document.getElementById('node_for_insert').innerHTML = ''; 

    if (price.checked) {
        getResponce("price", currentSortOrder);
    }
    if (title.checked) {
        getResponce("title", currentSortOrder);
    }

    currentSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';
}

async function getResponce(sortBy, order) {
    let response = await fetch("shop.json");
    let content = await response.json();

    let searchQuery = document.getElementById('search').value.toLowerCase().trim();
    let filteredContent = content.filter(product => {
        return (
            product.title.toLowerCase().includes(searchQuery) ||
            product.description.toLowerCase().includes(searchQuery) ||
            product.price.toString().includes(searchQuery)
        );
    });


    filteredContent.sort((a, b) => {
        if (sortBy === "price") {
            return order === 'asc' ? a.price - b.price : b.price - a.price;
        }
        if (sortBy === "title") {
            return order === 'asc' ? a.title.localeCompare(b.title) : b.title.localeCompare(a.title);
        }
    });

    displayContent(filteredContent);
}

function displayContent(content) {
    let node_for_insert = document.getElementById("node_for_insert");
    node_for_insert.innerHTML = ''; 

    content.forEach(product => {
        node_for_insert.innerHTML += `
            <li style="width: 310px" class="d-flex flex-column m-1 p-1 border bg-body">
                <img style="width: 180px" class="align-self-center" src="${product.img}" alt="${product.title}">
                <h5 class="card-title">${product.title}</h5>
                <p class="card-text">${product.description}</p>
                <p class="card-text text-primary">Цена: ${product.price} $</p>
                <input type="hidden" name="vendor_code" value="${product.vendor_code}">
                <p class="card-text">Заказать <input class="w-25" type="number" name="amount" value="0" min="0"></p>
            </li>
        `;
    });
}


function search() {
    sort(); 
}

</script>

</body>
</html>
